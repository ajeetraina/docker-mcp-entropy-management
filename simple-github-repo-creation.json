{
  "name": "Simple Repo Creator",
  "nodes": [
    {
      "parameters": {
        "path": "simple-repo-create",
        "httpMethod": "POST",
        "options": {}
      },
      "id": "webhook",
      "name": "ðŸ“¥ Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [200, 300],
      "webhookId": "simple-repo-create"
    },
    {
      "parameters": {
        "jsCode": "// Super simple data processing\nconst data = $input.first().json.body || $input.first().json;\n\n// Get basic info\nconst company = data.company_name || 'Test Company';\nconst repo = data.repository_name || 'test-repo';\nconst owner = data.github_owner || 'ajeetraina';\n\nconsole.log(`Creating simple repo: ${owner}/${repo} for ${company}`);\n\n// Create a basic README\nconst readme = `# ${company}\n\n## Welcome to ${company}\n\nThis repository was created using the AI-Powered Entropy Management System.\n\n**Created:** ${new Date().toISOString().split('T')[0]}\n**Repository:** https://github.com/${owner}/${repo}\n\n## Getting Started\n\n1. Explore this repository\n2. Add your business content\n3. Organize using the systematic framework\n\n---\n*Generated by Docker MCP + n8n workflow*`;\n\nreturn {\n  json: {\n    company_name: company,\n    repository_name: repo,\n    github_owner: owner,\n    readme_content: readme\n  }\n};"
      },
      "id": "process",
      "name": "ðŸ”„ Process Data",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [400, 300]
    },
    {
      "parameters": {
        "url": "http://host.docker.internal:3001/tools/create_or_update_file",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyContentType": "json",
        "jsonBody": "={\n  \"owner\": {{ JSON.stringify($json.github_owner) }},\n  \"repo\": {{ JSON.stringify($json.repository_name) }},\n  \"path\": \"README.md\",\n  \"content\": {{ JSON.stringify($json.readme_content) }},\n  \"message\": \"Initial commit: Create repository for \" + {{ JSON.stringify($json.company_name) }},\n  \"branch\": \"main\"\n}",
        "options": {
          "timeout": 30000
        }
      },
      "id": "create-file",
      "name": "ðŸ“„ Create README",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4,
      "position": [600, 300]
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "status",
              "value": "={{ $json.success ? 'completed' : 'failed' }}"
            },
            {
              "name": "company_name",
              "value": "={{ $('Process Data').item.json.company_name }}"
            },
            {
              "name": "repository_name",
              "value": "={{ $('Process Data').item.json.repository_name }}"
            },
            {
              "name": "github_owner", 
              "value": "={{ $('Process Data').item.json.github_owner }}"
            },
            {
              "name": "repository_url",
              "value": "https://github.com/{{ $('Process Data').item.json.github_owner }}/{{ $('Process Data').item.json.repository_name }}"
            },
            {
              "name": "message",
              "value": "={{ $json.success ? 'Repository created successfully!' : 'Repository creation failed: ' + ($json.error || 'Unknown error') }}"
            },
            {
              "name": "timestamp",
              "value": "={{ new Date().toISOString() }}"
            }
          ]
        }
      },
      "id": "response",
      "name": "ðŸ“¤ Build Response",
      "type": "n8n-nodes-base.set",
      "typeVersion": 1,
      "position": [800, 300]
    }
  ],
  "connections": {
    "ðŸ“¥ Webhook": {
      "main": [
        [
          {
            "node": "ðŸ”„ Process Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ðŸ”„ Process Data": {
      "main": [
        [
          {
            "node": "ðŸ“„ Create README",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ðŸ“„ Create README": {
      "main": [
        [
          {
            "node": "ðŸ“¤ Build Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {},
  "versionId": "simple-v1"
}
