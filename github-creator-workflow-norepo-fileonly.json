{
  "name": "GitHub Business OS Creator (Files Only - No Repo Creation)",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "create-github-structure",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "61bc8606-4087-455f-883c-f5fefdada302",
      "name": "ğŸš€ GitHub Deploy Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        -220,
        100
      ],
      "webhookId": "create-github-structure"
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "82227e4b-d8be-42e7-9a3a-7db297b01d3d",
      "name": "ğŸ“¢ Deploy Status",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        0,
        0
      ]
    },
    {
      "parameters": {
        "jsCode": "// Prepare GitHub file deployment with B-OS structure (assumes repository exists)\nconst inputData = $('ğŸš€ GitHub Deploy Trigger').item.json.body;\n\n// Extract B-OS data\nconst companyName = inputData.company_name || 'Your Company';\nconst repositoryName = inputData.repository_name;\nconst githubOwner = inputData.github_owner;\n\n// Handle both business_os (from AI Builder) and domains (manual input)\nlet domains = [];\nif (inputData.business_os) {\n  domains = Object.keys(inputData.business_os).map(key => {\n    const domain = inputData.business_os[key];\n    return {\n      number: parseInt(key),\n      name: domain.name,\n      content: [domain.description],\n      subdomains: domain.subdomains ? Object.keys(domain.subdomains).map(subKey => ({\n        number: subKey,\n        name: domain.subdomains[subKey]\n      })) : [],\n      ai_insights: domain.ai_insights || {},\n      action_items: domain.action_items || []\n    };\n  });\n} else {\n  domains = inputData.domains || inputData.structured_domains || [];\n}\n\n// Validate required inputs\nif (!githubOwner || !repositoryName) {\n  throw new Error('github_owner and repository_name are required');\n}\n\n// Generate folder structure based on 0-9 framework\nconst folderStructure = domains.map(domain => {\n  const folderName = `${domain.number.toString().padStart(2, '0')}-${domain.name.toLowerCase().replace(/[^a-z0-9]/g, '-')}`;\n  \n  let readmeContent = `# ${domain.number}. ${domain.name}\\n\\n## Overview\\n${domain.content?.join('\\n') || 'Business domain documentation and resources.'}\\n\\n`;\n  \n  if (domain.ai_insights && Object.keys(domain.ai_insights).length > 0) {\n    readmeContent += `## AI Insights\\n\\n`;\n    Object.entries(domain.ai_insights).forEach(([key, value]) => {\n      if (Array.isArray(value)) {\n        readmeContent += `**${key.replace(/_/g, ' ').toUpperCase()}:**\\n${value.map(v => `- ${v}`).join('\\n')}\\n\\n`;\n      } else {\n        readmeContent += `**${key.replace(/_/g, ' ').toUpperCase()}:** ${value}\\n\\n`;\n      }\n    });\n  }\n  \n  if (domain.subdomains && domain.subdomains.length > 0) {\n    readmeContent += `## Structure\\n\\n${domain.subdomains.map(sub => `- **${sub.number}** ${sub.name}`).join('\\n')}\\n\\n`;\n  }\n  \n  if (domain.action_items && domain.action_items.length > 0) {\n    readmeContent += `## Next Actions\\n\\n${domain.action_items.map(item => `- [ ] ${item}`).join('\\n')}\\n\\n`;\n  }\n  \n  readmeContent += `## Resources\\n\\n- [ ] Documentation\\n- [ ] Templates\\n- [ ] Processes\\n- [ ] Tools & Integrations\\n\\n---\\n*Auto-generated by Entropy Management System*`;\n  \n  return {\n    domain_number: domain.number,\n    domain_name: domain.name,\n    folder_name: folderName,\n    folder_path: `${folderName}/`,\n    readme: {\n      path: `${folderName}/README.md`,\n      content: readmeContent\n    }\n  };\n});\n\n// Create enhanced main repository README\nconst hasAiRoadmap = inputData.ai_roadmap && Object.keys(inputData.ai_roadmap).length > 0;\nconst hasAiIntelligence = inputData.business_intelligence && Object.keys(inputData.business_intelligence).length > 0;\n\nlet mainReadmeContent = `# ${companyName} - Business Operating System\\n\\n> Systematic business organization powered by AI-driven entropy management\\n\\n## ğŸ¯ Overview\\n\\nThis repository contains the complete Business Operating System (B-OS) for ${companyName}, organized using the systematic 0-9 framework for maximum clarity and zero organizational overhead.\\n\\n`;\n\nif (hasAiIntelligence) {\n  const bi = inputData.business_intelligence;\n  mainReadmeContent += `## ğŸ¤– AI Business Intelligence\\n\\n**Business Focus:** ${bi.business_focus || 'Not specified'}\\n\\n**Core Value Proposition:** ${bi.core_value_proposition || 'Not specified'}\\n\\n**Business Model:** ${bi.business_model || 'Not specified'}\\n\\n`;\n}\n\nmainReadmeContent += `## ğŸ—ï¸ Structure\\n\\n${domains.map(domain => `### ${domain.number}. ${domain.name}\\nğŸ“ [\\`${domain.number.toString().padStart(2, '0')}-${domain.name.toLowerCase().replace(/[^a-z0-9]/g, '-')}/\\`](./${domain.number.toString().padStart(2, '0')}-${domain.name.toLowerCase().replace(/[^a-z0-9]/g, '-')}/)\\n${domain.content?.[0] || 'Business domain for ' + domain.name}\\n`).join('\\n')}`;\n\nif (hasAiRoadmap) {\n  mainReadmeContent += `\\n\\n## ğŸ—ºï¸ AI-Generated Roadmap\\n\\n${Object.entries(inputData.ai_roadmap).map(([phase, data]) => `### ${data.name}\\n**Duration:** ${data.duration}\\n**Focus:** ${data.focus}\\n**Domains:** ${data.domains?.join(', ')}\\n**Priority:** ${data.ai_priority}\\n`).join('\\n')}`;\n}\n\nmainReadmeContent += `\\n\\n## ğŸš€ Getting Started\\n\\n1. **Browse by Domain**: Navigate to any 0-9 numbered folder\\n2. **Review Templates**: Each domain contains structured templates\\n3. **Follow Processes**: Use established workflows in each area\\n4. **Maintain Structure**: Add new content following the 0-9 framework\\n\\n## ğŸ¤– Automation\\n\\nThis B-OS is maintained by an AI-powered entropy management system that:\\n\\n- âœ… Automatically organizes new business information\\n- âœ… Maintains cross-platform consistency\\n- âœ… Generates insights from organized data\\n- âœ… Prevents organizational chaos\\n\\n---\\n\\n**Generated by**: MCP Docker Entropy Management System\\n**Last Updated**: ${new Date().toISOString()}\\n**Domains**: ${domains.length}/10\\n**Status**: ${domains.length >= 8 ? 'âœ… Ready for Production' : 'âš ï¸ In Development'}${hasAiIntelligence ? '\\n**AI Model**: ' + (inputData.ai_model_used || 'AI-Enhanced') : ''}`;\n\nconst mainReadme = {\n  path: 'README.md',\n  content: mainReadmeContent\n};\n\nconst allFiles = [\n  mainReadme,\n  ...folderStructure.map(folder => folder.readme)\n];\n\nconst preparationData = {\n  company_name: companyName,\n  repository_name: repositoryName,\n  github_owner: githubOwner,\n  folder_structure: folderStructure,\n  main_readme: mainReadme,\n  all_files: allFiles,\n  \n  stats: {\n    domains_count: domains.length,\n    folders_to_create: folderStructure.length,\n    total_files: allFiles.length,\n    ai_enhanced: hasAiIntelligence\n  },\n  \n  validation: {\n    has_domains: domains.length > 0,\n    has_github_owner: !!githubOwner,\n    ready_for_deployment: domains.length > 0 && !!githubOwner && !!repositoryName\n  },\n  \n  timestamp: new Date().toISOString()\n};\n\nconsole.log(`ğŸ™ Preparing GitHub file deployment for: ${companyName}`);\nconsole.log(`ğŸ“ Creating ${preparationData.stats.total_files} files in repository: ${repositoryName}`);\nconsole.log(`âœ… Ready: ${preparationData.validation.ready_for_deployment}`);\nconsole.log(`ğŸ¤– AI Enhanced: ${preparationData.stats.ai_enhanced}`);\n\nreturn [{ json: preparationData }];"
      },
      "id": "7c08ebcd-7ef3-4ec1-942b-16041981171b",
      "name": "âš™ï¸ Prepare File Deployment",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        220,
        100
      ]
    },
    {
      "parameters": {
        "command": "docker",
        "arguments": "=mcp tools call create_or_update_file owner=\"{{ $json.github_owner }}\" repo=\"{{ $json.repository_name }}\" path=\"{{ $json.main_readme.path }}\" content=\"{{ Buffer.from($json.main_readme.content).toString('base64') }}\" message=\"Update: Business Operating System structure\" branch=main",
        "options": {}
      },
      "id": "6537c19f-30f9-44e6-b18e-fa1c44738209",
      "name": "ğŸ“ Update Main README",
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        440,
        100
      ]
    },
    {
      "parameters": {
        "batchSize": 1,
        "inputFieldName": "folder_structure",
        "options": {}
      },
      "id": "batch_domain_files",
      "name": "ğŸ“ Batch Domain Files",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        640,
        100
      ]
    },
    {
      "parameters": {
        "command": "docker",
        "arguments": "=mcp tools call create_or_update_file owner=\"{{ $('âš™ï¸ Prepare File Deployment').item.json.github_owner }}\" repo=\"{{ $('âš™ï¸ Prepare File Deployment').item.json.repository_name }}\" path=\"{{ $json.readme.path }}\" content=\"{{ Buffer.from($json.readme.content).toString('base64') }}\" message=\"Add domain structure: {{ $json.domain_name }}\" branch=main",
        "options": {}
      },
      "id": "create_domain_files",
      "name": "ğŸ“„ Create Domain Files",
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        840,
        100
      ]
    },
    {
      "parameters": {
        "command": "docker",
        "arguments": "mcp tools call get_me",
        "options": {}
      },
      "id": "verify_github",
      "name": "ğŸ” Verify GitHub Access",
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        440,
        200
      ]
    },
    {
      "parameters": {
        "jsCode": "// Final deployment summary\nconst deploymentData = $('âš™ï¸ Prepare File Deployment').item.json;\nconst githubVerification = $('ğŸ” Verify GitHub Access').item.json;\nconst folderStructure = deploymentData.folder_structure;\n\nlet authenticatedUser = 'Unknown';\ntry {\n  if (githubVerification.stdout) {\n    const userInfo = JSON.parse(githubVerification.stdout);\n    authenticatedUser = userInfo.login || 'Unknown';\n  }\n} catch (error) {\n  console.log('Could not parse GitHub user info:', error.message);\n}\n\nconst createdStructure = {\n  deployment_status: 'completed',\n  \n  repository: {\n    name: deploymentData.repository_name,\n    owner: deploymentData.github_owner,\n    url: `https://github.com/${deploymentData.github_owner}/${deploymentData.repository_name}`,\n    updated_via: 'MCP Docker file operations'\n  },\n  \n  github_verification: {\n    authenticated_user: authenticatedUser,\n    access_confirmed: !!githubVerification.stdout\n  },\n  \n  domains_created: folderStructure.map(folder => ({\n    domain: `${folder.domain_number}. ${folder.domain_name}`,\n    folder_name: folder.folder_name,\n    readme_path: folder.readme.path\n  })),\n  \n  files_created: [\n    deploymentData.main_readme.path,\n    ...folderStructure.map(folder => folder.readme.path)\n  ],\n  \n  creation_summary: {\n    total_files: deploymentData.stats.total_files,\n    domains_structured: folderStructure.length,\n    repository_url: `https://github.com/${deploymentData.github_owner}/${deploymentData.repository_name}`,\n    structure_type: '0-9 Systematic Business Framework',\n    mcp_integration: 'MCP Docker file operations',\n    ai_enhanced: deploymentData.stats.ai_enhanced || false\n  },\n  \n  next_steps: [\n    `Visit repository: https://github.com/${deploymentData.github_owner}/${deploymentData.repository_name}`,\n    'Verify all domain folders are created',\n    'Review generated Business OS structure',\n    'Set up Notion workspace integration',\n    'Configure Slack channels for each domain'\n  ],\n  \n  completion_status: 'github_files_deployed_via_mcp',\n  timestamp: new Date().toISOString()\n};\n\nconsole.log(`ğŸ‰ GitHub Business OS file deployment completed!`);\nconsole.log(`ğŸ“ Repository: ${createdStructure.repository.url}`);\nconsole.log(`ğŸ‘¤ GitHub User: ${createdStructure.github_verification.authenticated_user}`);\nconsole.log(`ğŸ“ Files created: ${createdStructure.files_created.length}`);\nconsole.log(`ğŸ—ï¸ Domains: ${createdStructure.domains_created.length}`);\nconsole.log(`ğŸ³ MCP Integration: Active`);\n\nreturn [{ json: createdStructure }];"
      },
      "id": "35ffd459-91d1-4a09-8751-9354deec88ff",
      "name": "ğŸ¯ Finalize Structure",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1040,
        100
      ]
    },
    {
      "parameters": {
        "options": {
          "responseCode": 200
        }
      },
      "id": "73be962d-c88e-407e-82d2-630594bc3b05",
      "name": "ğŸ“‹ Deployment Complete",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        1240,
        100
      ]
    }
  ],
  "connections": {
    "ğŸš€ GitHub Deploy Trigger": {
      "main": [
        [
          {
            "node": "ğŸ“¢ Deploy Status",
            "type": "main",
            "index": 0
          },
          {
            "node": "âš™ï¸ Prepare File Deployment",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "âš™ï¸ Prepare File Deployment": {
      "main": [
        [
          {
            "node": "ğŸ“ Update Main README",
            "type": "main",
            "index": 0
          },
          {
            "node": "ğŸ” Verify GitHub Access",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“ Update Main README": {
      "main": [
        [
          {
            "node": "ğŸ“ Batch Domain Files",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“ Batch Domain Files": {
      "main": [
        [
          {
            "node": "ğŸ“„ Create Domain Files",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ“„ Create Domain Files": {
      "main": [
        [
          {
            "node": "ğŸ¯ Finalize Structure",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ğŸ¯ Finalize Structure": {
      "main": [
        [
          {
            "node": "ğŸ“‹ Deployment Complete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "active": true,
  "settings": {},
  "versionId": "1",
  "staticData": {},
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "tags": []
}
